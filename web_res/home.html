<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <base href="{{.Host}}/"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0 shrink-to-fit=no"/>
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Progressive Web app">

    <meta name="theme-color" content="#f0f8ff"/>
    <meta name="description" content="Home landing page for Bill Derksen. Hosting my resume and some portfolio applications.  Author: Bill Derksen" />

    <title>derksite</title>

    <link rel="stylesheet" type="text/css"  href="{{.Host}}/static/css/home.css"/>
    <link rel="manifest" href="{{.Host}}/manifest.json">
    <link rel="shortcut icon" href="{{.Host}}/static/img/courticon.ico" type="image/x-icon"/>
    <link rel="apple-touch-icon" href="{{.Host}}/static/img/1apple-touch-icon.png"/>
    <link rel="apple-touch-icon" sizes="57x57" href="{{.Host}}/static/img/1apple-touch-icon-57x57.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="{{.Host}}/static/img/1apple-touch-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="76x76" href="{{.Host}}/static/img/1apple-touch-icon-76x76.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="{{.Host}}/static/img/1apple-touch-icon-114x114.png"/>
    <link rel="apple-touch-icon" sizes="120x120" href="{{.Host}}/static/img/1apple-touch-icon-120x120.png"/>
    <link rel="apple-touch-icon" sizes="144x144" href="{{.Host}}/static/img/1apple-touch-icon-144x144.png"/>
    <link rel="apple-touch-icon" sizes="152x152" href="{{.Host}}/static/img/1apple-touch-icon-152x152.png"/>
    <link rel="apple-touch-icon" sizes="180x180" href="{{.Host}}/static/img/1apple-touch-icon-180x180.png"/>
    
    <script src="{{.Host}}/static/js/app.js" defer></script>

</head>
<!-- style="background-image: url({{.Host}}/static/img/tex_sample_artifact.png)" -->
<body id="bigbody" style="background-image: url({{.Host}}/static/img/tex_sample_artifact.png)">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

  <!-- Webpage background canvas/render -->
  <canvas id="bkgrnd" style="background-image: url({{.Host}}/static/img/tex_sample_artifact.png)" >  
    <script>

      //-- grab the canvas + gen scene
      const container = document.getElementById('bkgrnd');
      const scene = new THREE.Scene()
      //scene.background = new THREE.Color('black');

      //-- setup camera
      const aspect = container.clientWidth / container.clientHeight;
      var camera = new THREE.PerspectiveCamera( 75, aspect, 0.1, 100 );
      camera.position.set(0, 0, 30);

      const texx = new THREE.TextureLoader().load('{{.Host}}/static/img/tex_sample_artifact.png');

      //-- setup stuff to render + add to scene
      const geometry = new THREE.SphereGeometry( 15, 32, 16 );
      const material = new THREE.MeshStandardMaterial( { color: 0xff0000 , metalness: 0.5, roughness: 0, map: texx} );
      var sphere = new THREE.Mesh( geometry, material );
      scene.add( sphere );

      // const geometry = new THREE.SphereGeometry();
      // const material = new THREE.MeshPhysicalMaterial( { color: 0x00ff00, clearcoat: 1.0 } );
      // const blob = new THREE.Mesh( geometry, material );
      // scene.add( blob );

      //-- add some lights
      const ambientLight = new THREE.AmbientLight( 0xcccccc, 0.4 );
      scene.add( ambientLight );
      const directionalLight = new THREE.DirectionalLight( 0xffffff, 1 );
      directionalLight.position.set(0,0,30);
      scene.add( directionalLight );

      //-- setup renderer
      var renderer = new THREE.WebGLRenderer({antialias:true, canvas: container, alpha: true});
      renderer.setSize(container.clientWidth, container.clientHeight);
      //renderer.setSize(window.innertWidth, window.innerHeight);
      renderer.shadowMapEnabled = true;

      var time = 0;
      window.addEventListener( 'resize', onWindowResize, false );
      render();

      //-- render loop
      function render(){
        time += 1 / 2*Math.PI / 100;
        //resizeCanvasToDisplaySize();
        requestAnimationFrame( render );  

        //blobify();
        sphere.rotation.y += 0.01;
        sphere.position.x = Math.cos(time) * 20;
        renderer.render(scene, camera);
       };

       //-- fun function to mess w geometry positions a bit
       function blobify(){
        var k = 3;
        var position = sphere.geometry.attributes.position;
        var p = new THREE.Vector3();

        for (var i = 0; i < position.count; i++) {
            p.fromBufferAttribute( position, i );
            p.normalize().multiplyScalar(Math.random()*5 + 1);
          }
          sphere.geometry.computeVertexNormals();
          sphere.geometry.normalsNeedUpdate = true;
          sphere.geometry.verticesNeedUpdate = true;
      }

       //-- resize along with window accordingly
       function onWindowResize(){
        camera.aspect = container.clientWidth / container.clientHeight
        camera.updateProjectionMatrix();

        renderer.setSize( window.innerWidth, window.innerHeight );
       };

  </script>
  </canvas>
    <section class="scroll">
      <nav id="nav">
        <header id="header"><b>bill derksen</b></header>
        <div class="github">
          <p><a href="https://github.com/bderksen20" style="text-decoration: none">github</a></p>
        </div>
        <div id="navbox" style="background-color: #fcd4b0">
          <img id="derk" width="200" height="200" src="{{.Host}}/static/img/derk_animated.gif" alt="it's me!"/>
        </div>
        <div id="navbox">
          <img id="fishyGif" width="200" height="200" src="{{.Host}}/static/img/ultra_rare_fish.gif" alt="cool gif"/>
        </div>
        <div id="navbox" style="background-color: #fcd4b0">
          <canvas id="canvas" style="margin: 5px;">
            <script type="module">
  
              //-- CDN imports... todo: this is dumb don't do this, use local three.js instead
              import {OrbitControls} from 'https://cdn.skypack.dev/three@0.130.1/examples/jsm/controls/OrbitControls.js';
              //import {ColladaLoader} from 'https://cdn.skypack.dev/three@0.130.1/examples/jsm/loaders/ColladaLoader.js';
              import {GLTFLoader} from 'https://cdn.skypack.dev/three@0.130.1/examples/jsm/loaders/GLTFLoader.js';
              
              let drawSpace, camera, scene, renderer, model, controls;
              let tex1, tex2, tex3, tex4;
  
              window.addEventListener('mousemove', onMouseMove);
              init();
              render();
  
              function init(){
                drawSpace = document.getElementById('canvas');
  
                //-- load textures
                tex2 = new THREE.TextureLoader().load('{{.Host}}/static/img/sliced_phong.png');
                tex1 = new THREE.TextureLoader().load('{{.Host}}/static/img/tex_sample_artifact.png');
  
                //-- prime scene and camera
                scene = new THREE.Scene();
                scene.background = tex2;
                camera = new THREE.PerspectiveCamera( 70, drawSpace.clientWidth/drawSpace.clientHeight, 1, 1000 );
                
                const mat1 = new THREE.MeshLambertMaterial ({
                    map: tex1,    
                    envMap: scene.background,      
                    combine: THREE.MixOperation,     
                    reflectivity: .5     
                });
                const mat2 = new THREE.MeshBasicMaterial( { map: tex2, side: THREE.DoubleSide } );
  
                const loadingManager = new THREE.LoadingManager( function () {
                  scene.add( model );
                } );
  
                const loader = new GLTFLoader(loadingManager);
                loader.load('{{.Host}}/static/model/kasa_obake.gltf', function ( gltf ) {
                  model = gltf.scene;
                  model.children[0].children[3].material = mat1;
                  model.children[0].children[5].material = mat2;
                  model.position.set(0,-2.5,0);
                  //-- update materials
                  console.log(gltf);
  
                } );
  
                const ambientLight = new THREE.AmbientLight( 0xcccccc, 0.4 );
                scene.add( ambientLight );
                //const directionalLight = new THREE.DirectionalLight( 0xffffff, 0.8 );
                //directionalLight.position.set( 1, 1, 0 ).normalize();
                //scene.add( directionalLight );
  
                            
                //-- prime renderer
                renderer = new THREE.WebGLRenderer({ antialias: true, canvas: drawSpace, logarithmicDepthBuffer: true});
                renderer.setPixelRatio(window.devicePixelRatio);
                renderer.setSize( 190, 190 );
  
                //renderer.outputEncoding = THREE.sRGBEncoding;
                //renderer.outputEncoding = THREE.sRGBEncoding;
                //drawSpace.appendChild(renderer.domElement);
                //document.body.appendChild( renderer.domElement );
  
                                  //-- prime orbit controls
                                  controls = new OrbitControls(camera, renderer.domElement);
  
                camera.position.set( 3, 2, 3 );
                camera.lookAt( 0, 0, 0 );
                controls.update();
  
                //-- prime cube to render
                //const geometry = new THREE.BoxGeometry();
                //const material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
                //const cube = new THREE.Mesh( geometry, material );
                //scene.add( cube );
  
              }
          
              //-- Render function/loop
              function render(){
                  //resizeCanvasToDisplaySize();
                  requestAnimationFrame( render );
          
                  model.rotation.y += 0.01;
          
                  controls.update();
                  renderer.render(scene, camera);
              };

              function onMouseMove(event){
                // var theta = Math.tan(event.pageY/ (event.pageX - 20));
                // if (theta > 90) theta = 90;
                // if (theta < 0) theta = 0;
                // model.rotation.z = theta;
                // model.rotation.x = theta;
              }
              
            </script>
          </canvas>
        </div>
      </nav>
  
      <article id="mainArticleBody">
        <div id="nav2h">
          <a href="{{.Host}}/home"><div id="nav2hbox">home</div></a>
          <a href="{{.Host}}/resume/home"><div id="nav2hbox">resume</div></a>
          <a href="{{.Host}}/resume/home#sec_projects"><div id="nav2hbox">projects</div></a>
          <a href="{{.Host}}/resume/home#sec_links"><div id="nav2hbox">links</div></a>
        </div>
        <div id= "float_about_container">
          <div id="about_me_section">
            <div class="TextSubsection">
              <p>Hi, I'm Bill! Welcome to my site! I'm a computer / software engineer, graduate student researcher, 
                (very) amateur pixel artist, and synthesizer enthusiast among many other things :)</p>
            </div>
            <h1 class="Header">some info about me</h1>
            <div class="TextSubsection" i>
              <p>My central interests lie in the intersecting realms of computer graphics, virtual reality, high performance computing,
                 and heterogeneous computing (with a special affinity for design, creative engineering, and entertainment applications). 
                </p>
              <p>This website's frontend includes various animations, renderings, and other fun graphics content programmed and 
                created by me!  Try interacting with the upset <a href="https://yokai.com/karakasakozou/" style="text-decoration: none" >kasa obake</a> spinning around at the bottom left! As you may notice,
                 the model is served by our webserver and then rendered in real-time with orbit controls (implemented with threejs / webgl).
                </p>
              <p>The site's backend operates using my brilliant peer @ <a  style="text-decoration: none" href="https://www.pylons.tech/">Pylons</a> | 
                <a style="text-decoration: none" href="https://tendermint.com/">Tendermint</a>, Alex Johnson's, webserver package developed 100% from scratch 
                with Golang and Typescript. This is a personal project that we have begun to collaborate on and hope to continue 
                building out into a robust and easy to use software package (my contributions thus far include 3D model/geometry 
                serving and compression features). Check it out <a  style="text-decoration: none" href="https://github.com/aljo242/shmeeload.xyz">here</a>!
              </p>
              <p>As my site has only been under development for a few weeks, please be wary of any possible bugs and stay posted for updates!</p>
              <p>- Bill :)</p>
            </div>
          </div>
          <div class="TextSubsection" id="me_img">
            <figure>
              <img src="{{.Host}}/static/img/stealla_raytracer.jpg" alt="picture of me">
              <figcaption><p>my dog, Stella, doing some reading</p></figcaption>
          </figure>
          </div>
        </div>
        </article>
  
      </section>
</body>
</html>